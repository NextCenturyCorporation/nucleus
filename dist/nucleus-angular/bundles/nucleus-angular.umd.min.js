!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("nucleus/dist/core/core.util"),require("nucleus/dist/core/models/dataset"),require("nucleus/dist/core/services/filter.service"),require("nucleus/dist/core/components/filter.web-component"),require("@angular/common"),require("nucleus/dist/core/services/abstract.search.service"),require("nucleus/dist/core/components/aggregation.web-component"),require("nucleus/dist/core/components/group.web-component"),require("nucleus/dist/core/components/search.web-component"),require("nucleus/dist/visualizations/text-cloud/text-cloud.web-component")):"function"==typeof define&&define.amd?define("nucleus-angular",["exports","@angular/core","nucleus/dist/core/core.util","nucleus/dist/core/models/dataset","nucleus/dist/core/services/filter.service","nucleus/dist/core/components/filter.web-component","@angular/common","nucleus/dist/core/services/abstract.search.service","nucleus/dist/core/components/aggregation.web-component","nucleus/dist/core/components/group.web-component","nucleus/dist/core/components/search.web-component","nucleus/dist/visualizations/text-cloud/text-cloud.web-component"],t):t((e=e||self)["nucleus-angular"]={},e.ng.core,e.core_util,null,null,e.filter_webComponent,e.ng.common,null,e.aggregation_webComponent,e.group_webComponent,e.search_webComponent,e.textCloud_webComponent)}(this,(function(e,t,n,r,i,o,s,u,a,p,l,c){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function m(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var h=function(){function e(){this._visualizationIsInitialized=!1}return e.prototype.doesHaveSubclassInputs=function(){return!0},e.prototype.onWrapperAfterViewInit=function(){},e.prototype.onWrapperChanges=function(){},e.prototype.ngAfterViewInit=function(){this.onWrapperAfterViewInit(),this.ngOnChanges(void 0)},e.prototype.ngOnChanges=function(e){if(this.id&&this.dataset&&this.filterService&&this.options&&this.doesHaveSubclassInputs()){var t=this.findWrappedElement();this.options.id=t.getAttribute("id"),t&&(n.CoreUtil.updateElementAttributes(t,this.retrieveWrappedElementObservedAttributes(),this.options),this.onWrapperChanges(),this._visualizationIsInitialized||(this.initWrappedElement(t),this._visualizationIsInitialized=!0))}},e.propDecorators={dataset:[{type:t.Input}],filterService:[{type:t.Input}],id:[{type:t.Input}],options:[{type:t.Input}]},e}();var f=function(e){function r(t){var n=e.call(this)||this;return n.elementRef=t,n}return m(r,e),r.prototype.doesHaveSubclassInputs=function(){return!!(this.searchElement&&this.visInputElement&&this.visOutputElement)},r.prototype.findWrappedElement=function(){return this.elementRef.nativeElement.querySelector("#"+this.id+"-filter")},r.prototype.initWrappedElement=function(e){e.init(this.dataset,this.filterService,{search:this.searchElement,visInput:this.visInputElement,visOutput:this.visOutputElement})},r.prototype.onWrapperAfterViewInit=function(){var e=this.findWrappedElement();n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"valuesFiltered")},r.prototype.retrieveWrappedElementObservedAttributes=function(){return o.NucleusFilter.observedAttributes},r.prototype.updateFilteredValues=function(e){this.findWrappedElement().updateFilteredValues(e)},r.decorators=[{type:t.Component,args:[{selector:"app-nucleus-angular-filter",template:"\n<nucleus-filter [attr.id]=\"id + '-filter'\"></nucleus-filter>\n",encapsulation:t.ViewEncapsulation.Emulated,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],r.ctorParameters=function(){return[{type:t.ElementRef}]},r.propDecorators={searchElement:[{type:t.Input}],visInputElement:[{type:t.Input}],visOutputElement:[{type:t.Input}]},r}(h);var g=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[f],exports:[f],entryComponents:[f],imports:[s.CommonModule],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),v=function(e){function r(t){var n=e.call(this)||this;return n.elementRef=t,n}return m(r,e),r.prototype.doesHaveSubclassInputs=function(){return!(!this.searchService||!this.visInputElement)},r.prototype.findWrappedElement=function(){return this.elementRef.nativeElement.querySelector("#"+this.id+"-search")},r.prototype.initWrappedElement=function(e){e.init(this.dataset,this.filterService,this.searchService,{visInput:this.visInputElement})},r.prototype.onWrapperAfterViewInit=function(){var e=this.findWrappedElement();n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchCanceled"),n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchFailed"),n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchFinished"),n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchLaunched")},r.prototype.onWrapperChanges=function(){var e=this;this.aggregations&&this.aggregations.forEach((function(t,r){var i=e.elementRef.nativeElement.querySelector("#"+e.id+"-aggregation-"+r);i&&n.CoreUtil.updateElementAttributes(i,a.NucleusAggregation.observedAttributes,t)})),this.groups&&this.groups.forEach((function(t,r){var i=e.elementRef.nativeElement.querySelector("#"+e.id+"-group-"+r);i&&n.CoreUtil.updateElementAttributes(i,p.NucleusGroup.observedAttributes,t)}))},r.prototype.retrieveWrappedElementObservedAttributes=function(){return l.NucleusSearch.observedAttributes},r.prototype.runQuery=function(e,t){this.findWrappedElement().runQuery()},r.prototype.updateFilters=function(e,t){this.findWrappedElement().updateFilters(e,t)},r.prototype.updateFilterDesigns=function(e,t){this.findWrappedElement().updateFilterDesigns(e,t)},r.decorators=[{type:t.Component,args:[{selector:"app-nucleus-angular-search",template:'\n<nucleus-search [attr.id]="id + \'-search\'">\n    <nucleus-aggregation *ngFor="let aggregation of aggregations; let i = index" [attr.id]="id + \'-aggregation-\' + i">\n    </nucleus-aggregation>\n    <nucleus-group *ngFor="let group of groups; let i = index" [attr.id]="id + \'-group-\' + i"></nucleus-group>\n</nucleus-search>\n',encapsulation:t.ViewEncapsulation.Emulated,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],r.ctorParameters=function(){return[{type:t.ElementRef}]},r.propDecorators={aggregations:[{type:t.Input}],groups:[{type:t.Input}],options:[{type:t.Input}],searchService:[{type:t.Input}],visInputElement:[{type:t.Input}]},r}(h);var E=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[v],exports:[v],entryComponents:[v],imports:[s.CommonModule],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e}(),y=function(e){function r(t){var n=e.call(this)||this;return n.elementRef=t,n}return m(r,e),r.prototype.createExportData=function(e,t){return this.elementRef.nativeElement.querySelector("#"+this.id+"-angular").createExportData(e,t)},r.prototype.doesHaveSubclassInputs=function(){return!!this.searchService},r.prototype.findWrappedElement=function(){return this.elementRef.nativeElement.querySelector("#"+this.id+"-angular")},r.prototype.initWrappedElement=function(e){e.init(this.dataset,this.filterService,this.searchService)},r.prototype.onWrapperAfterViewInit=function(){var e=this.findWrappedElement();n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"valuesFiltered"),n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchCanceled"),n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchFailed"),n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchFinished"),n.CoreUtil.addEventPropagationListener(this.elementRef.nativeElement,e,"searchLaunched")},r.prototype.redraw=function(){this.elementRef.nativeElement.querySelector("#"+this.id+"-angular").redraw()},r.prototype.retrieveWrappedElementObservedAttributes=function(){return c.NucleusTextCloud.observedAttributes},r.decorators=[{type:t.Component,args:[{selector:"app-nucleus-angular-text-cloud",template:"\n<nucleus-text-cloud [attr.id]=\"id + '-angular'\"></nucleus-text-cloud>\n",encapsulation:t.ViewEncapsulation.Emulated,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],r.ctorParameters=function(){return[{type:t.ElementRef}]},r.propDecorators={searchService:[{type:t.Input}]},r}(h);var C=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[y],exports:[y],entryComponents:[y],imports:[s.CommonModule],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.NucleusCommonAngularComponent=h,e.NucleusFilterAngularComponent=f,e.NucleusFilterAngularModule=g,e.NucleusSearchAngularComponent=v,e.NucleusSearchAngularModule=E,e.NucleusTextCloudAngularComponent=y,e.NucleusTextCloudAngularModule=C,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=nucleus-angular.umd.min.js.map